<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Partnership Registration</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/partner.css">
</head>

<body>
    </head>

    <body>
        <div class="container">
            <h1>Partnership Registration</h1>
            <p class="form-description">Join us in our mission to reduce child malnutrition in tribal areas. Fill out
                this form to become a partner.</p>

            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-step active">
                        <span>Basic Info</span>
                    </div>
                    <div class="progress-step">
                        <span>Partnership</span>
                    </div>
                    <div class="progress-step">
                        <span>Credentials</span>
                    </div>
                    <div class="progress-step">
                        <span>Resources</span>
                    </div>
                    <div class="progress-step">
                        <span>Custom</span>
                    </div>
                    <div class="progress-step">
                        <span>Legal</span>
                    </div>
                    <div class="progress-step">
                        <span>Review</span>
                    </div>
                </div>
            </div>

            <form id="partner-form">
                <!-- Section 1: Basic Information -->
                <div class="form-section active" id="section1">
                    <h2 class="section-title"><i class="fas fa-building"></i> Basic Information</h2>

                    <div class="form-group">
                        <label for="org-name" class="required-label">Organization/Individual Name</label>
                        <input type="text" id="org-name" name="org-name" required>
                        <div class="error-message" id="org-name-error">Please enter your organization name</div>
                    </div>

                    <div class="form-group">
                        <label for="contact-name" class="required-label">Contact Person Name</label>
                        <input type="text" id="contact-name" name="contact-name" required>
                        <div class="error-message" id="contact-name-error">Please enter the contact person's name</div>
                    </div>

                    <div class="form-group">
                        <label for="email" class="required-label">Email Address</label>
                        <input type="email" id="email" name="email" required>
                        <div class="error-message" id="email-error">Please enter a valid email address</div>
                    </div>

                    <div class="form-group">
                        <label for="phone">Phone Number</label>
                        <input type="tel" id="phone" name="phone" placeholder="Optional">
                        <span class="helper-text">For urgent coordination</span>
                    </div>

                    <div class="form-group">
                        <label for="website">Website/Social Media</label>
                        <input type="url" id="website" name="website" placeholder="Optional">
                        <span class="helper-text">To verify legitimacy and work</span>
                    </div>

                    <div class="button-group">
                        <button type="button" class="btn btn-next" onclick="nextSection(1)">Next</button>
                    </div>
                </div>

                <!-- Section 2: Partnership Details -->
                <div class="form-section" id="section2">
                    <h2 class="section-title"><i class="fas fa-handshake"></i> Partnership Details</h2>

                    <div class="form-group">
                        <label for="partnership-type" class="required-label">Type of Partnership</label>
                        <select id="partnership-type" name="partnership-type" required>
                            <option value="">-- Select Partnership Type --</option>
                            <option value="ngo">NGO</option>
                            <option value="corporate">Corporate Sponsor</option>
                            <option value="volunteer">Volunteer Group</option>
                            <option value="donor">Individual Donor</option>
                            <option value="tech">Tech Partner</option>
                        </select>
                        <div class="error-message" id="partnership-type-error">Please select a partnership type</div>
                    </div>

                    <div class="form-group">
                        <label class="required-label">Areas of Interest</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" name="interest" value="nutrition"> Child Nutrition
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="interest" value="food"> Food Distribution
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="interest" value="healthcare"> Healthcare
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="interest" value="education"> Education
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="interest" value="fundraising"> Fundraising
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="interest" value="tech"> Technology Support
                            </label>
                        </div>
                        <div class="error-message" id="interest-error">Please select at least one area of interest</div>
                    </div>

                    <div class="form-group">
                        <label for="geo-focus" class="required-label">Geographic Focus</label>
                        <select id="geo-focus" name="geo-focus" required>
                            <option value="">-- Select Geographic Focus --</option>
                            <option value="bangalore">Bangalore</option>
                            <option value="mysore">Mysore</option>
                            <option value="hassan">Hassan</option>
                            <option value="mandya">Mandya</option>
                            <option value="other">Other (specify)</option>
                        </select>
                        <div id="geo-other-container" style="display: none; margin-top: 10px;">
                            <input type="text" id="geo-other" name="geo-other" placeholder="Please specify">
                        </div>
                        <div class="error-message" id="geo-focus-error">Please select a geographic focus</div>
                    </div>

                    <div class="form-group">
                        <label for="referral-source" class="required-label">How Did You Hear About Us?</label>
                        <select id="referral-source" name="referral-source" required>
                            <option value="">-- Select Source --</option>
                            <option value="social">Social Media</option>
                            <option value="ngo-network">NGO Network</option>
                            <option value="referral">Referral</option>
                            <option value="google">Google Search</option>
                            <option value="event">Event</option>
                        </select>
                        <div class="error-message" id="referral-source-error">Please select how you heard about us</div>
                    </div>

                    <div class="button-group">
                        <button type="button" class="btn btn-prev" onclick="prevSection(2)">Previous</button>
                        <button type="button" class="btn btn-next" onclick="nextSection(2)">Next</button>
                    </div>
                </div>

                <!-- Section 3: Organizational Credentials -->
                <div class="form-section" id="section3">
                    <h2 class="section-title"><i class="fas fa-file-alt"></i> Organizational Credentials</h2>

                    <div class="form-group" id="registration-details-group">
                        <label for="registration-number" class="required-label">Registration Details</label>
                        <input type="text" id="registration-number" name="registration-number"
                            placeholder="Registration Number (e.g., 12A/80G certified)">
                        <span class="helper-text">Required for NGOs</span>
                        <div class="error-message" id="registration-number-error">Please enter registration details
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="documents">Upload Documents</label>
                        <div class="file-upload" onclick="document.getElementById('documents').click()">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <p>Click to upload NGO certificate, CSR policy, or past project reports</p>
                            <input type="file" id="documents" name="documents" multiple>
                        </div>
                        <span class="helper-text">Optional: Upload relevant documents to strengthen your
                            application</span>
                    </div>

                    <div class="form-group">
                        <label for="experience" class="required-label">Years of Experience</label>
                        <select id="experience" name="experience" required>
                            <option value="">-- Select Experience --</option>
                            <option value="less-than-1">&lt;1 year</option>
                            <option value="1-3">1–3 years</option>
                            <option value="3-5">3–5 years</option>
                            <option value="5-plus">5+ years</option>
                        </select>
                        <div class="error-message" id="experience-error">Please select years of experience</div>
                    </div>

                    <div class="button-group">
                        <button type="button" class="btn btn-prev" onclick="prevSection(3)">Previous</button>
                        <button type="button" class="btn btn-next" onclick="nextSection(3)">Next</button>
                    </div>
                </div>

                <!-- Section 4: Resource Commitment -->
                <div class="form-section" id="section4">
                    <h2 class="section-title"><i class="fas fa-hands-helping"></i> Resource Commitment</h2>

                    <div class="form-group">
                        <label class="required-label">Resources You Can Provide</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" name="resources" value="funds"> Funds
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="resources" value="volunteers"> Volunteers
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="resources" value="food"> Food Supplies
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="resources" value="technology"> Technology
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="resources" value="logistics"> Logistics Support
                            </label>
                        </div>
                        <div class="error-message" id="resources-error">Please select at least one resource you can
                            provide</div>
                    </div>

                    <div class="form-group">
                        <label>Specific Skills</label>
                        <div class="checkbox-group">
                            <label class="checkbox-item">
                                <input type="checkbox" name="skills" value="nutritionists"> Nutritionists
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="skills" value="doctors"> Doctors
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="skills" value="program-managers"> Program Managers
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="skills" value="field-volunteers"> Field Volunteers
                            </label>
                            <label class="checkbox-item">
                                <input type="checkbox" name="skills" value="tech-developers"> Tech Developers
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="frequency" class="required-label">Frequency of Support</label>
                        <select id="frequency" name="frequency" required>
                            <option value="">-- Select Frequency --</option>
                            <option value="one-time">One-Time</option>
                            <option value="monthly">Monthly</option>
                            <option value="quarterly">Quarterly</option>
                            <option value="annual">Annual</option>
                        </select>
                        <div class="error-message" id="frequency-error">Please select frequency of support</div>
                    </div>

                    <div class="button-group">
                        <button type="button" class="btn btn-prev" onclick="prevSection(4)">Previous</button>
                        <button type="button" class="btn btn-next" onclick="nextSection(4)">Next</button>
                    </div>
                </div>

                <!-- Section 5: Custom Fields -->
                <div class="form-section" id="section5">
                    <h2 class="section-title"><i class="fas fa-puzzle-piece"></i> Custom Project Details</h2>

                    <div class="form-group">
                        <label for="alignment" class="required-label">Alignment with Tribal Nutrition Goals</label>
                        <textarea id="alignment" name="alignment" rows="4"
                            placeholder="Briefly describe how your work aligns with our mission to reduce child malnutrition"
                            required></textarea>
                        <div class="error-message" id="alignment-error">Please describe how your work aligns with our
                            mission</div>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-item">
                            <input type="checkbox" name="voice-api" value="yes"> Can your organization contribute
                            voice-based services (via Twilio)?
                        </label>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-item">
                            <input type="checkbox" name="payment-gateway" value="yes"> Do you use Razorpay or other
                            payment gateways for fund transfers?
                        </label>
                    </div>

                    <div class="button-group">
                        <button type="button" class="btn btn-prev" onclick="prevSection(5)">Previous</button>
                        <button type="button" class="btn btn-next" onclick="nextSection(5)">Next</button>
                    </div>
                </div>

                <!-- Section 6: Legal & Consent -->
                <div class="form-section" id="section6">
                    <h2 class="section-title"><i class="fas fa-gavel"></i> Legal & Consent</h2>

                    <div class="form-group">
                        <label class="checkbox-item required-label">
                            <input type="checkbox" name="terms" id="terms" required> I agree to the Terms of Service and
                            Privacy Policy
                        </label>
                        <div class="error-message" id="terms-error">You must agree to the Terms of Service and Privacy
                            Policy</div>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-item">
                            <input type="checkbox" name="newsletter" value="yes"> Receive updates about tribal nutrition
                            programs
                        </label>
                    </div>

                    <div class="form-group">
                        <label class="required-label">CAPTCHA Verification</label>
                        <div class="captcha-container">
                            <div class="captcha-image" id="captcha-display">
                                XY3P9Z
                            </div>
                            <div class="captcha-input">
                                <input type="text" id="captcha" name="captcha" placeholder="Enter the code shown"
                                    required>
                                <div class="error-message" id="captcha-error">Please enter the correct CAPTCHA code
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="button-group">
                        <button type="button" class="btn btn-prev" onclick="prevSection(6)">Previous</button>
                        <button type="button" class="btn btn-next" onclick="nextSection(6)">Next</button>
                    </div>
                </div>

                <!-- Section 7: Review & Submit -->
                <div class="form-section" id="section7">
                    <h2 class="section-title"><i class="fas fa-check-circle"></i> Review & Submit</h2>

                    <div class="review-summary">
                        <p>Please review your information before submitting. You can go back to any section to make
                            changes.</p>

                        <div id="review-content"
                            style="margin: 20px 0; padding: 20px; background-color: var(--light-bg); border-radius: 8px;">
                            <!-- This will be populated with form data on review -->
                            <p>Your form data summary will appear here.</p>
                        </div>
                    </div>

                    <div class="button-group">
                        <button type="button" class="btn btn-prev" onclick="prevSection(7)">Previous</button>
                        <button type="submit" class="btn btn-submit">Become a Partner</button>
                    </div>
                </div>
            </form>
        </div>


        <script>
            // Current section tracker
            let currentSection = 1;
            const totalSections = 7;

            // Navigation functions
            function nextSection(sectionNum) {
                if (validateSection(sectionNum)) {
                    document.getElementById(`section${sectionNum}`).classList.remove('active');
                    document.getElementById(`section${sectionNum + 1}`).classList.add('active');

                    // Update progress steps
                    document.querySelectorAll('.progress-step')[sectionNum - 1].classList.remove('active');
                    document.querySelectorAll('.progress-step')[sectionNum - 1].classList.add('completed');
                    document.querySelectorAll('.progress-step')[sectionNum].classList.add('active');

                    // If going to review section, populate review content
                    if (sectionNum + 1 === 7) {
                        populateReview();
                    }

                    currentSection = sectionNum + 1;
                    window.scrollTo(0, 0);
                }
            }

            function prevSection(sectionNum) {
                document.getElementById(`section${sectionNum}`).classList.remove('active');
                document.getElementById(`section${sectionNum - 1}`).classList.add('active');

                // Update progress steps
                document.querySelectorAll('.progress-step')[sectionNum - 1].classList.remove('active');
                document.querySelectorAll('.progress-step')[sectionNum - 2].classList.remove('completed');
                document.querySelectorAll('.progress-step')[sectionNum - 2].classList.add('active');

                currentSection = sectionNum - 1;
                window.scrollTo(0, 0);
            }

            // Form validation
            function validateSection(sectionNum) {
                let isValid = true;

                // Reset all error messages
                document.querySelectorAll('.error-message').forEach(el => {
                    el.style.display = 'none';
                });

                switch (sectionNum) {
                    case 1: // Basic Information
                        const orgName = document.getElementById('org-name').value;
                        const contactName = document.getElementById('contact-name').value;
                        const email = document.getElementById('email').value;

                        if (!orgName) {
                            document.getElementById('org-name-error').style.display = 'block';
                            isValid = false;
                        }

                        if (!contactName) {
                            document.getElementById('contact-name-error').style.display = 'block';
                            isValid = false;
                        }

                        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                        if (!email || !emailRegex.test(email)) {
                            document.getElementById('email-error').style.display = 'block';
                            isValid = false;
                        }
                        break;

                    case 2: // Partnership Details
                        const partnershipType = document.getElementById('partnership-type').value;
                        const interests = document.querySelectorAll('input[name="interest"]:checked');
                        const geoFocus = document.getElementById('geo-focus').value;
                        const referralSource = document.getElementById('referral-source').value;

                        if (!partnershipType) {
                            document.getElementById('partnership-type-error').style.display = 'block';
                            isValid = false;
                        }

                        if (interests.length === 0) {
                            document.getElementById('interest-error').style.display = 'block';
                            isValid = false;
                        }

                        if (!geoFocus) {
                            document.getElementById('geo-focus-error').style.display = 'block';
                            isValid = false;
                        }

                        if (!referralSource) {
                            document.getElementById('referral-source-error').style.display = 'block';
                            isValid = false;
                        }
                        break;

                    case 3: // Organizational Credentials
                        const partnerType = document.getElementById('partnership-type').value;
                        const registrationNumber = document.getElementById('registration-number').value;
                        const experience = document.getElementById('experience').value;

                        // Registration number is required for NGOs
                        if (partnerType === 'ngo' && !registrationNumber) {
                            document.getElementById('registration-number-error').style.display = 'block';
                            isValid = false;
                        }

                        if (!experience) {
                            document.getElementById('experience-error').style.display = 'block';
                            isValid = false;
                        }
                        break;

                    case 4: // Resource Commitment
                        const resources = document.querySelectorAll('input[name="resources"]:checked');
                        const frequency = document.getElementById('frequency').value;

                        if (resources.length === 0) {
                            document.getElementById('resources-error').style.display = 'block';
                            isValid = false;
                        }

                        if (!frequency) {
                            document.getElementById('frequency-error').style.display = 'block';
                            isValid = false;
                        }
                        break;

                    case 5: // Custom Fields
                        const alignment = document.getElementById('alignment').value;

                        if (!alignment) {
                            document.getElementById('alignment-error').style.display = 'block';
                            isValid = false;
                        }
                        break;

                    case 6: // Legal & Consent
                        const terms = document.getElementById('terms').checked;
                        const captcha = document.getElementById('captcha').value;

                        if (!terms) {
                            document.getElementById('terms-error').style.display = 'block';
                            isValid = false;
                        }

                        // Simple demo validation - in production use server-side validation
                        if (!captcha || captcha !== document.getElementById('captcha-display').innerText) {
                            document.getElementById('captcha-error').style.display = 'block';
                            isValid = false;
                        }
                        break;
                }

                return isValid;
            }

            // Populate review content
            function populateReview() {
                const reviewContent = document.getElementById('review-content');

                // Get form data
                const orgName = document.getElementById('org-name').value;
                const contactName = document.getElementById('contact-name').value;
                const email = document.getElementById('email').value;
                const phone = document.getElementById('phone').value;
                const website = document.getElementById('website').value;

                const partnershipType = document.getElementById('partnership-type').value;
                const partnershipTypeText = partnershipType ? document.querySelector(`#partnership-type option[value="${partnershipType}"]`).textContent : '';

                const interests = Array.from(document.querySelectorAll('input[name="interest"]:checked')).map(el => el.parentNode.textContent.trim()).join(', ');

                const geoFocus = document.getElementById('geo-focus').value;
                const geoFocusText = geoFocus ? document.querySelector(`#geo-focus option[value="${geoFocus}"]`).textContent : '';

                const referralSource = document.getElementById('referral-source').value;
                const referralSourceText = referralSource ? document.querySelector(`#referral-source option[value="${referralSource}"]`).textContent : '';

                const registrationNumber = document.getElementById('registration-number').value;

                const experience = document.getElementById('experience').value;
                const experienceText = experience ? document.querySelector(`#experience option[value="${experience}"]`).textContent : '';

                const resources = Array.from(document.querySelectorAll('input[name="resources"]:checked')).map(el => el.parentNode.textContent.trim()).join(', ');
                const skills = Array.from(document.querySelectorAll('input[name="skills"]:checked')).map(el => el.parentNode.textContent.trim()).join(', ');

                const frequency = document.getElementById('frequency').value;
                const frequencyText = frequency ? document.querySelector(`#frequency option[value="${frequency}"]`).textContent : '';

                const alignment = document.getElementById('alignment').value;
                const voiceApi = document.querySelector('input[name="voice-api"]:checked') ? 'Yes' : 'No';
                const paymentGateway = document.querySelector('input[name="payment-gateway"]:checked') ? 'Yes' : 'No';

                const newsletter = document.querySelector('input[name="newsletter"]:checked') ? 'Yes' : 'No';

                // Build the HTML
                let html = `
        <h3>Basic Information</h3>
        <p><strong>Organization:</strong> ${orgName}</p>
        <p><strong>Contact Person:</strong> ${contactName}</p>
        <p><strong>Email:</strong> ${email}</p>
        ${phone ? `<p><strong>Phone:</strong> ${phone}</p>` : ''}
        ${website ? `<p><strong>Website:</strong> ${website}</p>` : ''}
        
        <h3>Partnership Details</h3>
        <p><strong>Partnership Type:</strong> ${partnershipTypeText}</p>
        <p><strong>Areas of Interest:</strong> ${interests}</p>
        <p><strong>Geographic Focus:</strong> ${geoFocusText}</p>
        <p><strong>Referral Source:</strong> ${referralSourceText}</p>
        
        <h3>Organizational Credentials</h3>
        ${registrationNumber ? `<p><strong>Registration Number:</strong> ${registrationNumber}</p>` : ''}
        <p><strong>Experience:</strong> ${experienceText}</p>
        
        <h3>Resource Commitment</h3>
        <p><strong>Resources:</strong> ${resources}</p>
        ${skills ? `<p><strong>Skills:</strong> ${skills}</p>` : ''}
        <p><strong>Frequency:</strong> ${frequencyText}</p>
        
        <h3>Custom Details</h3>
        <p><strong>Alignment with Mission:</strong> ${alignment}</p>
        <p><strong>Voice/API Capabilities:</strong> ${voiceApi}</p>
        <p><strong>Payment Gateway:</strong> ${paymentGateway}</p>
        
        <h3>Preferences</h3>
        <p><strong>Newsletter:</strong> ${newsletter}</p>
    `;

                reviewContent.innerHTML = html;
            }

            // Add event listeners when DOM is loaded
            document.addEventListener('DOMContentLoaded', function () {
                // Initialize file upload display
                document.getElementById('documents').addEventListener('change', function (e) {
                    const fileNames = Array.from(e.target.files).map(file => file.name).join(', ');
                    if (fileNames) {
                        this.parentNode.querySelector('p').textContent = 'Selected files: ' + fileNames;
                    } else {
                        this.parentNode.querySelector('p').textContent = 'Click to upload NGO certificate, CSR policy, or past project reports';
                    }
                });

                // Handle "Other" in Geographic Focus
                document.getElementById('geo-focus').addEventListener('change', function () {
                    if (this.value === 'other') {
                        document.getElementById('geo-other-container').style.display = 'block';
                    } else {
                        document.getElementById('geo-other-container').style.display = 'none';
                    }
                });

                // Show/hide registration fields based on partnership type
                document.getElementById('partnership-type').addEventListener('change', function () {
                    if (this.value === 'ngo') {
                        document.getElementById('registration-details-group').style.display = 'block';
                        document.querySelector('label[for="registration-number"]').classList.add('required-label');
                    } else {
                        document.getElementById('registration-details-group').style.display = 'block';
                        document.querySelector('label[for="registration-number"]').classList.remove('required-label');
                    }
                });

                // Form submission
                document.getElementById('partner-form').addEventListener('submit', function (e) {
                    e.preventDefault();

                    if (validateSection(7)) {
                        // In a real application, you would send the form data to the server here
                        alert('Form submitted successfully! We will contact you within 48 hours.');

                        // For demo purposes, redirect to a thank you page
                        // window.location.href = '/thank-you';

                        // Or reset the form and go back to step 1
                        this.reset();
                        for (let i = 1; i <= totalSections; i++) {
                            document.getElementById(`section${i}`).classList.remove('active');
                            document.querySelectorAll('.progress-step')[i - 1].classList.remove('active', 'completed');
                        }
                        document.getElementById('section1').classList.add('active');
                        document.querySelectorAll('.progress-step')[0].classList.add('active');
                        currentSection = 1;
                    }
                });

                // Generate random CAPTCHA on page load
                generateCaptcha();
            });

            // Generate random CAPTCHA
            function generateCaptcha() {
                const chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ';
                let captcha = '';
                for (let i = 0; i < 6; i++) {
                    captcha += chars.charAt(Math.floor(Math.random() * chars.length));
                }
                document.getElementById('captcha-display').innerText = captcha;
            }
        </script>
    </body>

</html>